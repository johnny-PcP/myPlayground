import{p as C,q as K,d as L,a6 as A,a7 as E,h as G,s as R,a4 as $,a5 as z,o as c,c as d,j as u,G as F,e as V,t as g,F as _,B as P,a as B}from"./framework.CK0l16au.js";function q(y,b){const h=C(y.value);let r;return K(y,v=>{clearTimeout(r),r=setTimeout(()=>{h.value=v},b)}),h}const J=["placeholder"],Q=L({__name:"nested-fuzzy-search",props:A({data:{},placeholder:{default:"請輸入搜尋關鍵字"},matchPrecision:{default:.3},autoEmitResults:{type:Boolean,default:!0},debounceMs:{default:300}},{modelValue:{default:""},modelModifiers:{}}),emits:A(["search"],["update:modelValue"]),setup(y,{expose:b,emit:h}){const r=y,v=h,x=E(y,"modelValue"),i=q(x,r.debounceMs),s=G(()=>{const e=i.value.trim().toLowerCase();if(!e)return[];const o=O(e);return r.data.filter(o)});function m(e,o=2){const t=[];for(let a=0;a<=e.length-o;a++)t.push(e.slice(a,a+o));return t}function S(e,o,t=2){const a=e.toLowerCase(),n=o.toLowerCase();if(n.length===1)return a.includes(n)?.3:0;if(a.length<t||n.length<t)return a.includes(n)?.8:0;if(a===n)return 1;const l=m(a,t),p=m(n,t),f=l.filter(I=>p.includes(I)),k=f.length/p.length,w=f.length/l.length;if(k+w===0)return 0;let M=2*k*w/(k+w);return a.includes(n)&&(M=Math.min(M+.2,1)),M}function T(e,o){const t=o.split(/[.[\]]/).filter(Boolean);let a=e;for(const n of t){if(a==null)return null;a=a[n]}return a}function D(e,o=""){const t=[];if(!e||typeof e!="object")return t;for(const a of Object.keys(e)){const n=e[a],l=o?`${o}.${a}`:a;Array.isArray(n)?n.forEach((p,f)=>{p&&typeof p=="object"&&!(p instanceof Date)?t.push(...D(p,`${l}[${f}]`)):t.push(`${l}[${f}]`)}):n instanceof Date?t.push(l):n&&typeof n=="object"?t.push(...D(n,l)):t.push(l)}return t}function N(e){return e instanceof Date?e.toISOString():typeof e=="boolean"?e?"true":"false":String(e)}function O(e){return function(t){return D(t).some(n=>{const l=T(t,n);if(l==null)return!1;const p=N(l).toLowerCase(),f=r.matchPrecision;return S(p,e)>=f})}}function j(){v("search",s.value)}return R(()=>{r.autoEmitResults&&v("search",s.value)}),b({triggerSearch:j,results:s}),(e,o)=>$((c(),d("input",{"onUpdate:modelValue":o[0]||(o[0]=t=>x.value=t),type:"text",placeholder:e.placeholder,class:"search-input"},null,8,J)),[[z,x.value]])}}),U={class:"flex flex-col gap-4 w-full border border-gray-300 p-6"},W={key:0,class:"mt-4"},H={class:"text-lg font-semibold mb-2 bg-gray-200 p-2 rounded text-green-600"},X={class:"space-y-3"},Z={class:"font-bold text-black mb-2"},Y={class:"flex flex-wrap gap-1 mb-2"},ee={class:"text-sm text-gray-600 mb-2"},te={class:"text-gray-400 ml-2"},ae={class:"text-xs text-gray-500"},ne={key:0},oe={key:1,class:"bg-red-100 mt-4 p-3 rounded text-lg font-semibold"},se=L({__name:"basic-usage",setup(y){const b=[{id:1,title:"Complete Vue.js Development Guide",keywords:["Vue","JavaScript","Frontend","SPA"],author:{name:"John Smith",email:"john@example.com"},chapters:[{name:"Basic Concepts",duration:120},{name:"Composition API",duration:180},{name:"State Management",duration:150}]},{id:2,title:"React Performance Optimization",keywords:["React","Performance","Optimization"],author:{name:"Emily Johnson",email:"emily@example.com"},chapters:[{name:"Virtual DOM Principles",duration:90},{name:"Memo and Callback",duration:110},{name:"Code Splitting",duration:100}]},{id:3,title:"Node.js Backend Development",keywords:["Node.js","Express","API","Backend"],author:{name:"Michael Brown",email:"michael@example.com"},chapters:[{name:"Express Framework",duration:140},{name:"MongoDB Integration",duration:160},{name:"Authentication",duration:130}]},{id:4,title:"Python Data Science",keywords:["Python","Data Analysis","Pandas","NumPy"],author:{name:"Sarah Wilson",email:"sarah@example.com"},chapters:[{name:"Pandas Basics",duration:200},{name:"Data Visualization",duration:170},{name:"Machine Learning Intro",duration:220}]},{id:5,title:"Docker Containerization",keywords:["Docker","DevOps","Container","Deployment"],author:{name:"David Lee",email:"david@example.com"},chapters:[{name:"Docker Basics",duration:80},{name:"Dockerfile Writing",duration:95},{name:"Docker Compose",duration:120}]},{id:6,title:"Advanced TypeScript Development",keywords:["TypeScript","Types","Advanced","JavaScript"],author:{name:"Alex Chen",email:"alex@example.com"},chapters:[{name:"Type System",duration:110},{name:"Generic Programming",duration:140},{name:"Decorator Pattern",duration:90}]},{id:7,title:"Swift iOS App Development",keywords:["Swift","iOS","Mobile App","UIKit"],author:{name:"Lisa Garcia",email:"lisa@example.com"},chapters:[{name:"Swift Syntax",duration:160},{name:"UIKit Components",duration:180},{name:"Data Persistence",duration:120}]},{id:8,title:"Kubernetes Cluster Management",keywords:["Kubernetes","K8s","Orchestration","DevOps"],author:{name:"Robert Martinez",email:"robert@example.com"},chapters:[{name:"Basic Concepts",duration:100},{name:"Pods and Services",duration:150},{name:"Deployment Strategies",duration:170}]},{id:9,title:"Machine Learning Algorithms",keywords:["AI","Machine Learning","Algorithms","TensorFlow"],author:{name:"Amy Zhang",email:"amy@example.com"},chapters:[{name:"Supervised Learning",duration:240},{name:"Neural Networks",duration:200},{name:"Deep Learning",duration:280}]},{id:10,title:"Web Security Protection",keywords:["Security","HTTPS","XSS","CSRF"],author:{name:"Kevin Anderson",email:"kevin@example.com"},chapters:[{name:"Common Attack Methods",duration:130},{name:"Defense Mechanisms",duration:150},{name:"Security Testing",duration:110}]}],h=C(""),r=C([]);function v(x){r.value=x}return(x,i)=>(c(),d("div",U,[i[4]||(i[4]=u("span",null,"輸入: vue, react等文字（並嘗試打錯幾個字母）",-1)),F(Q,{modelValue:h.value,"onUpdate:modelValue":i[0]||(i[0]=s=>h.value=s),class:"bg-gray-300 rounded p-4 text-black",data:b,placeholder:"輸入關鍵字直接搜尋...",onSearch:v},null,8,["modelValue"]),r.value.length>0?(c(),d("div",W,[u("div",H," 搜尋結果 ("+g(r.value.length)+" 項): ",1),u("div",X,[(c(!0),d(_,null,P(r.value,s=>(c(),d("div",{key:s.id,class:"p-4 bg-gray-50 rounded border"},[u("h4",Z,g(s.title),1),u("div",Y,[(c(!0),d(_,null,P(s.keywords,m=>(c(),d("span",{key:m,class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded"},g(m),1))),128))]),u("div",ee,[i[1]||(i[1]=u("span",{class:"font-medium"},"作者：",-1)),B(g(s.author.name)+" ",1),u("span",te,"("+g(s.author.email)+")",1)]),u("div",ae,[i[2]||(i[2]=u("span",{class:"font-medium"},"章節：",-1)),(c(!0),d(_,null,P(s.chapters,(m,S)=>(c(),d("span",{key:m.name},[B(g(m.name)+" ("+g(m.duration)+"分) ",1),S<s.chapters.length-1?(c(),d("span",ne," • ")):V("",!0)]))),128))])]))),128))])])):r.value.length===0&&h.value.length!==0?(c(),d("div",oe,i[3]||(i[3]=[u("div",{class:"text-red-600"}," 沒有符合條件的結果 ",-1)]))):V("",!0)]))}});export{se as _,Q as a};
